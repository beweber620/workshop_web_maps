<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Build a Leaflet Web Map | Building Web Maps with Leaflet</title>
  <meta name="description" content="4 Build a Leaflet Web Map | Building Web Maps with Leaflet" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Build a Leaflet Web Map | Building Web Maps with Leaflet" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://ucdavisdatalab.github.io/workshop_web_maps/"" />
  
  
  <meta name="github-repo" content="ucdavisdatalab/workshop_web_maps" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Build a Leaflet Web Map | Building Web Maps with Leaflet" />
  
  
  

<meta name="author" content="Dr. Michele Tobias" />


<meta name="date" content="2021-10-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="build-a-webpage.html"/>

<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>




</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://datalab.ucdavis.edu/">
  <img src="https://datalab.ucdavis.edu/wp-content/uploads/2019/07/datalab-logo-full-color-rgb-1.png" style="height: 100%; width: 100%; object-fit: contain" />
</a></li>
<li><a href="./" style="font-size: 18px">Building Web Maps with Leaflet</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#description"><i class="fa fa-check"></i><b>0.1</b> Description</a>
<ul>
<li class="chapter" data-level="0.1.1" data-path="index.html"><a href="index.html#learning-objectives"><i class="fa fa-check"></i><b>0.1.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="0.1.2" data-path="index.html"><a href="index.html#skills"><i class="fa fa-check"></i><b>0.1.2</b> Skills</a></li>
<li class="chapter" data-level="0.1.3" data-path="index.html"><a href="index.html#prerequisites"><i class="fa fa-check"></i><b>0.1.3</b> Prerequisites</a></li>
<li class="chapter" data-level="0.1.4" data-path="index.html"><a href="index.html#software-tools"><i class="fa fa-check"></i><b>0.1.4</b> Software &amp; Tools:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#what-is-a-web-map"><i class="fa fa-check"></i><b>1.1</b> What is a “Web Map”?</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#why-make-a-web-map"><i class="fa fa-check"></i><b>1.2</b> Why make a web map?</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#examples"><i class="fa fa-check"></i><b>1.3</b> Examples</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#workflow"><i class="fa fa-check"></i><b>1.4</b> Workflow</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#leaflet"><i class="fa fa-check"></i><b>1.5</b> Leaflet</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="setting-up-your-file-structure.html"><a href="setting-up-your-file-structure.html"><i class="fa fa-check"></i><b>2</b> Setting Up Your File Structure</a>
<ul>
<li class="chapter" data-level="2.1" data-path="setting-up-your-file-structure.html"><a href="setting-up-your-file-structure.html#download-the-data"><i class="fa fa-check"></i><b>2.1</b> Download the Data</a></li>
<li class="chapter" data-level="2.2" data-path="setting-up-your-file-structure.html"><a href="setting-up-your-file-structure.html#folders"><i class="fa fa-check"></i><b>2.2</b> Folders</a></li>
<li class="chapter" data-level="2.3" data-path="setting-up-your-file-structure.html"><a href="setting-up-your-file-structure.html#files"><i class="fa fa-check"></i><b>2.3</b> Files</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="build-a-webpage.html"><a href="build-a-webpage.html"><i class="fa fa-check"></i><b>3</b> Build a Webpage</a>
<ul>
<li class="chapter" data-level="3.1" data-path="build-a-webpage.html"><a href="build-a-webpage.html#intro-to-html"><i class="fa fa-check"></i><b>3.1</b> Intro to HTML</a></li>
<li class="chapter" data-level="3.2" data-path="build-a-webpage.html"><a href="build-a-webpage.html#start-building-your-webpage"><i class="fa fa-check"></i><b>3.2</b> Start Building your Webpage</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="build-a-leaflet-web-map.html"><a href="build-a-leaflet-web-map.html"><i class="fa fa-check"></i><b>4</b> Build a Leaflet Web Map</a>
<ul>
<li class="chapter" data-level="4.1" data-path="build-a-leaflet-web-map.html"><a href="build-a-leaflet-web-map.html#prepare-your-page"><i class="fa fa-check"></i><b>4.1</b> Prepare Your Page</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="build-a-leaflet-web-map.html"><a href="build-a-leaflet-web-map.html#load-the-external-files"><i class="fa fa-check"></i><b>4.1.1</b> Load The External Files</a></li>
<li class="chapter" data-level="4.1.2" data-path="build-a-leaflet-web-map.html"><a href="build-a-leaflet-web-map.html#add-a-map-div"><i class="fa fa-check"></i><b>4.1.2</b> Add a Map Div</a></li>
<li class="chapter" data-level="4.1.3" data-path="build-a-leaflet-web-map.html"><a href="build-a-leaflet-web-map.html#add-a-script-section"><i class="fa fa-check"></i><b>4.1.3</b> Add a Script Section</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="build-a-leaflet-web-map.html"><a href="build-a-leaflet-web-map.html#add-a-map"><i class="fa fa-check"></i><b>4.2</b> Add A Map</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Building Web Maps with Leaflet</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="build-a-leaflet-web-map" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Build a Leaflet Web Map</h1>
<p>Now that we’ve made a basic webpage, we can add our web map.</p>
<div id="prepare-your-page" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Prepare Your Page</h2>
<div id="load-the-external-files" class="section level3" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> Load The External Files</h3>
<p>In the <strong>head</strong> section of our webpage, we need to add some information that will tell our map how to appear (the CSS file) and where to find the Leaflet package (Leaflet JavaScript file).</p>
<p>CSS stands for Cascading Style Sheet. You can think of this as the parameters that set the way certain objects are displayed in a website. The file we’ll load specifically styles the map elements made with Leaflet.</p>
<p>Loading the Leaflet JavaScript file enables our webpage to have access to the functions and tools in the Leaflet Library. For R or Python users, this is similar to loading packages or libraries in your code. We could save a static version of this library in our website folders and point to that, or we can link to an online version of it, like we have done in the code below.</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;

&lt;head&gt;
&lt;title&gt;UC Davis Campus Cats Map&lt;/title&gt;

&lt;!--Load the Leaflet CSS file --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://unpkg.com/leaflet@1.7.1/dist/leaflet.css&quot; integrity=&quot;sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==&quot;crossorigin=&quot;&quot;/&gt;

&lt;!--Load the Leaflet JavaScript file --&gt;
&lt;script src=&quot;https://unpkg.com/leaflet@1.7.1/dist/leaflet.js&quot; integrity=&quot;sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==&quot;crossorigin=&quot;&quot;&gt;&lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
&lt;h1&gt;UC Davis Campus Cats Map&lt;/h1&gt;
&lt;p&gt;This webmap shows the locations of UC Davis campus community cats.&lt;/p&gt;

&lt;/body&gt;

&lt;/html&gt;</code></pre>
<p>Note that in HTML, comments are written like this: <code>&lt;!-- This is a comment --&gt;</code>. Comments are information for the coder and don’t render on the website.</p>
</div>
<div id="add-a-map-div" class="section level3" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> Add a Map Div</h3>
<p>A <code>&lt;div&gt;</code> element defines a section in your HTML document. Our web map needs its own <code>&lt;div&gt;</code>. We’ll add one inside the <code>&lt;body&gt;</code> of the webpage. Note that the <code>&lt;div&gt;</code> has an ID. This will let us create settings and code that apply to this specific <code>&lt;div&gt;</code>. We can define the style of the <code>&lt;div&gt;</code> inside the tag (as we have done below) or we could do it in the <code>&lt;head&gt;</code> of the document in a <code>&lt;style&gt;</code> subsection, or in a separate CSS file.</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;

&lt;head&gt;
&lt;title&gt;UC Davis Campus Cats Map&lt;/title&gt;

&lt;!--Load the Leaflet CSS file --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://unpkg.com/leaflet@1.7.1/dist/leaflet.css&quot; integrity=&quot;sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==&quot;crossorigin=&quot;&quot;/&gt;

&lt;!--Load the Leaflet JavaScript file --&gt;
&lt;script src=&quot;https://unpkg.com/leaflet@1.7.1/dist/leaflet.js&quot; integrity=&quot;sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==&quot;crossorigin=&quot;&quot;&gt;&lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
&lt;h1&gt;UC Davis Campus Cats Map&lt;/h1&gt;
&lt;p&gt;This webmap shows the locations of UC Davis campus community cats.&lt;/p&gt;

&lt;div id=&quot;mapid&quot; style=&quot;width: 600px; height: 400px;&quot;&gt;&lt;/div&gt;

&lt;/body&gt;

&lt;/html&gt;</code></pre>
<p>If you reload your <code>index.html</code> file in your browser, you shouldn’t notice any difference. If the page doesn’t load, however, you’ll need to troubleshoot your code. Make sure your tags open and close in the right order.</p>
</div>
<div id="add-a-script-section" class="section level3" number="4.1.3">
<h3><span class="header-section-number">4.1.3</span> Add a Script Section</h3>
<p>Finally, we need to add a section to our code to hold the Leaflet JavaScript code we will write to make our map. Just below your map <code>&lt;div&gt;</code> (and inside the <strong>body</strong> section), add open and closed <code>&lt;script&gt;</code> tags.</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;

&lt;head&gt;
&lt;title&gt;UC Davis Campus Cats Map&lt;/title&gt;

&lt;!--Load the Leaflet CSS file --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://unpkg.com/leaflet@1.7.1/dist/leaflet.css&quot; integrity=&quot;sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==&quot;crossorigin=&quot;&quot;/&gt;

&lt;!--Load the Leaflet JavaScript file --&gt;
&lt;script src=&quot;https://unpkg.com/leaflet@1.7.1/dist/leaflet.js&quot; integrity=&quot;sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==&quot;crossorigin=&quot;&quot;&gt;&lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
&lt;h1&gt;UC Davis Campus Cats Map&lt;/h1&gt;
&lt;p&gt;This webmap shows the locations of UC Davis campus community cats.&lt;/p&gt;

&lt;div id=&quot;mapid&quot; style=&quot;width: 600px; height: 400px;&quot;&gt;&lt;/div&gt;

&lt;script&gt;

&lt;/script&gt;

&lt;/body&gt;

&lt;/html&gt;</code></pre>
</div>
</div>
<div id="add-a-map" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Add A Map</h2>
<p>Now we’re ready to add a map. We’ll make a simple one to start and add more data later.</p>
<p><strong>Note:</strong> from now on, we’ll be working in the <code>&lt;script&gt;</code> section, so the code will just show this section to avoid clutter and focus on what’s changing in the code.</p>
<p>Inside the <code>&lt;script&gt;</code> section, we’ll now be writing JavaScript. <code>//</code> is how you indicate a comment in JavaScript. Outside of this section, you’ll be writing HTML. It can get confusing sometimes, so have patience with yourself.</p>
<p>First, we’ll create an empty map in our mapid div, then we’ll load Stamen’s Toner tile service to use as a background layer. The limited color palette of the Toner tile service will make it easier to see the data we’ll be loading later.</p>
<pre><code>&lt;script&gt;

    //add an empty map called &quot;catmap&quot; to the page in the mapid div
    var catmap = L.map(&#39;mapid&#39;, {
        center: [38.538592, -121.75], 
        zoom: 15
        });

    //add the base map = Stamen Toner tile layer
    var Stamen_Toner = L.tileLayer(&#39;https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}.{ext}&#39;, {
        attribution: &#39;Map tiles by &lt;a href=&quot;http://stamen.com&quot;&gt;Stamen Design&lt;/a&gt;, &lt;a href=&quot;http://creativecommons.org/licenses/by/3.0&quot;&gt;CC BY 3.0&lt;/a&gt; &amp;mdash; Map data &amp;copy; &lt;a href=&quot;http://www.openstreetmap.org/copyright&quot;&gt;OpenStreetMap&lt;/a&gt;&#39;,
        subdomains: &#39;abcd&#39;,
        minZoom: 0,
        maxZoom: 20,
        ext: &#39;png&#39;
        });
        catmap.addLayer(Stamen_Toner);

&lt;/script&gt;</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="build-a-webpage.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ucdavisdatalab/workshop_web_maps/edit/master/04_Build_a_Webmap.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ucdavisdatalab/workshop_web_maps/blob/master/04_Build_a_Webmap.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
